{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{326:function(n,s,a){\"use strict\";a.r(s);var e=a(30),t=Object(e.a)({},(function(){var n=this,s=n.$createElement,a=n._self._c||s;return a(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":n.$parent.slotKey}},[a(\"h1\",{attrs:{id:\"canvas-画板-手机上也可以用的画板\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#canvas-画板-手机上也可以用的画板\"}},[n._v(\"#\")]),n._v(\" Canvas 画板---手机上也可以用的画板\")]),n._v(\" \"),a(\"p\",[n._v(\"学习制作画板之前，我们先来了解一下 canvas 标签\\n\"),a(\"strong\",[n._v(\"一.canvas 标签\")]),n._v(\"\\n1.canvas 标签与 img 标签相似，但是 canvas 标签是一个闭合标签，并且没有 src alt 属性。\\n2.canvas 标签有两个属性，width，height。我们在页面上用 canvas 绘制一个画布时，应用 width，height 属性设置大小，如果用 css 设置，绘制图像时可能会出现扭曲。 3.渲染上下文 context\\ncanvas 起初是空白的。为了展示，首先脚本需要找到渲染上下文，然后在它的上面绘制。\\ngetContext()方法可以获取到上下文 context.\")]),n._v(\" \"),a(\"p\",[a(\"strong\",[n._v(\"二.制作画板\")]),n._v(\"\\n画板功能：可以绘制不同颜色和粗细的线条，画板上有橡皮擦功能，一键清除功能，下载功能。\")]),n._v(\" \"),a(\"p\",[a(\"strong\",[n._v(\"1.首先我们需要绘制一个自适应屏幕宽度的画布。\")])]),n._v(\" \"),a(\"div\",{staticClass:\"language- line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[n._v(\" function wResize() {\\n        var pageWidth = document.documentElement.clientWidth\\n        var pageHeight = document.documentElement.clientHeight\\n\\n        canvas.width = pageWidth\\n        canvas.height = pageHeight\\n    }\\n\")])]),n._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[n._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"5\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"6\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"7\")]),a(\"br\")])]),a(\"p\",[a(\"strong\",[n._v(\"2.当用户在画板上绘画时有三种状态，鼠标点击态，鼠标移动态，鼠标离开态。\")]),n._v(\"\\n我们可以用 mousedown,mousemove ,mouseup 来监听三种状态。\")]),n._v(\" \"),a(\"p\",[n._v(\"当用户点击鼠标时：\")]),n._v(\" \"),a(\"div\",{staticClass:\"language- line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[n._v(\"  canvas.onmousedown = function (a) {\\n                var x = a.clientX;\\n                var y = a.clientY;\\n                using = true;//设置变量，标志开始使用画布\\n                if (eraserEnabled) {//如果标志使用橡皮擦，则清除画布内容\\n                    context.clearRect(x, y, 20, 20);\\n                }\\n                else {否则记录当前鼠标坐标\\n                    lastPoint = {x: x, y: y}\\n                }\\n            }\\n\")])]),n._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[n._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"5\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"6\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"7\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"8\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"9\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"10\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"11\")]),a(\"br\")])]),a(\"p\",[n._v(\"当用户鼠标移动时：\")]),n._v(\" \"),a(\"div\",{staticClass:\"language- line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[n._v('  canvas.onmousemove = function (a) {\\n                var x = a.clientX;\\n                var y = a.clientY;\\n                if (!using) {return}//判断是否使用画板\\n                if (eraserEnabled) {//如果标志使用橡皮擦，则清除画布内容\\n                    context.clearRect(x, y, 20, 20);\\n                }\\n                else{//如果没有使用橡皮擦\\n                    var newPoint = {\"x\": x, \"y\": y};//记录鼠标移动到的新坐标\\n                    drawLine(lastPoint.x, lastPoint.y, newPoint.x, newPoint.y) //绘制线条\\n                    lastPoint = newPoint;//将当前坐标作为下次移动的首坐标\\n                }\\n            }\\n')])]),n._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[n._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"5\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"6\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"7\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"8\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"9\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"10\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"11\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"12\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"13\")]),a(\"br\")])]),a(\"p\",[n._v(\"当鼠标离开时：\")]),n._v(\" \"),a(\"div\",{staticClass:\"language- line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[n._v(\"  canvas.onmouseup = function (a) {\\n                using = false;//设置变量，标志不使用画板\\n            }\\n\")])]),n._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[n._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"3\")]),a(\"br\")])]),a(\"p\",[a(\"strong\",[n._v(\"3.绘制直线\")])]),n._v(\" \"),a(\"div\",{staticClass:\"language- line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[n._v(\"function drawLine(x1, y1, x2, y2) {\\n    context.beginPath();//开始移动笔触，路径开始\\n    context.moveTo(x1, y1);//其实坐标\\n    context.lineWidth = lineWidth ;//默认线条粗细\\n    context.lineTo(x2, y2);//结束坐标\\n    context.stroke();\\n    context.closePath();//结束笔触，路径结束\\n}\\n\")])]),n._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[n._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"5\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"6\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"7\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"8\")]),a(\"br\")])]),a(\"p\",[n._v(\"stroke()：通过线条来绘制图形轮廓。\\nfill()：通过填充路径的内容区域生成实心的图形\")]),n._v(\" \"),a(\"p\",[a(\"strong\",[n._v(\"4.画笔功能\")])]),n._v(\" \"),a(\"div\",{staticClass:\"language- line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[n._v(\"pen.onclick = function(){\\n    eraserEnabled = false;//设置变量，标志不使用橡皮擦\\n    pen.classList.add('active');//设置画板上画笔按钮的样式变化\\n    eraser.classList.remove('active');//设置画板上橡皮擦按钮的样式变化\\n\\n}\\n\")])]),n._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[n._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"5\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"6\")]),a(\"br\")])]),a(\"p\",[a(\"strong\",[n._v(\"5.橡皮擦功能\")])]),n._v(\" \"),a(\"div\",{staticClass:\"language- line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[n._v(\"eraser.onclick = function(){\\n    eraserEnabled = true;//标志使用橡皮擦\\n    eraser.classList.add('active');//设置画板上橡皮擦按钮的样式变化\\n    pen.classList.remove('active');//设置画板上画笔按钮的样式变化\\n}\\n\\n\")])]),n._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[n._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"5\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"6\")]),a(\"br\")])]),a(\"p\",[a(\"strong\",[n._v(\"6.一键清除功能\")])]),n._v(\" \"),a(\"div\",{staticClass:\"language- line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[n._v(\"clear.onclick = function(){\\n    context.clearRect(0,0,canvas.width,canvas.height);\\n}\\n\")])]),n._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[n._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"3\")]),a(\"br\")])]),a(\"p\",[n._v(\"这里使用了 clearRect(x, y, width, height)方法，清除指定矩形区域，让清除部分完全透明。x,y 坐标为其实坐标，width, height 为清除矩形区域的大小。\")]),n._v(\" \"),a(\"p\",[a(\"strong\",[n._v(\"7.一键下载功能\")])]),n._v(\" \"),a(\"div\",{staticClass:\"language- line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[n._v(\"download.onclick = function(){\\n    var url = canvas.toDataURL('image/png');\\n    var a = document.createElement('a');\\n    document.body.appendChild(a);\\n    a.href = url;\\n    a.download = 'context';\\n    a.click();\\n}\\n\")])]),n._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[n._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"5\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"6\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"7\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"8\")]),a(\"br\")])]),a(\"p\",[n._v(\"canvas.toDataURL('image/png');该方法返回一个 png 格式的图片展示的 url，当用户点击画板上的下载按钮，在 html 中插入一个 a 标签，a.download 指向画布的上下文,download 属性规定被下载的超链接目标。\")]),n._v(\" \"),a(\"p\",[a(\"strong\",[n._v(\"三.手机适配的画板\")]),n._v(\" 1.添加 meta 标签:因为浏览器初始会将页面现在手机端显示时进行缩放，因此我们可以在 meta 标签中设置 meta viewport 属性，告诉浏览器不将页面进行缩放，页面宽度=用户设备屏幕宽度\")]),n._v(\" \"),a(\"div\",{staticClass:\"language- line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[n._v('  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0\">\\n')])]),n._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[n._v(\"1\")]),a(\"br\")])]),a(\"p\",[n._v(\"2.移动端监听鼠标事件的方法与 pc 端不同\\n当鼠标点击时用 ontouchstart 方法监听：\")]),n._v(\" \"),a(\"div\",{staticClass:\"language- line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[n._v(\"canvas.ontouchstart = function(a){\\n\\n            var x = a.touches[0].clientX;\\n            var y =a.touches[0].clientY;\\n            using = true;\\n            if (eraserEnabled) {\\n                context.clearRect(x, y, 20, 20);\\n            }\\n            else {\\n                lastPoint = {x: x, y: y}\\n            }\\n        }\\n\")])]),n._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[n._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"5\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"6\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"7\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"8\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"9\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"10\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"11\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"12\")]),a(\"br\")])]),a(\"p\",[n._v(\"当鼠标移动是用 ontouchmove 方法监听：\")]),n._v(\" \"),a(\"div\",{staticClass:\"language- line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[n._v(' canvas.ontouchmove = function(a){\\n\\n            var x = a.touches[0].clientX;\\n            var y = a.touches[0].clientY;\\n            if (!using) {return}\\n            if (eraserEnabled) {\\n                context.clearRect(x, y, 20, 20);\\n            }\\n            else{\\n\\n                var newPoint = {\"x\": x, \"y\": y};\\n                drawLine(lastPoint.x, lastPoint.y, newPoint.x, newPoint.y)\\n                lastPoint = newPoint;\\n\\n            }\\n        }\\n')])]),n._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[n._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"5\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"6\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"7\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"8\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"9\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"10\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"11\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"12\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"13\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"14\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"15\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"16\")]),a(\"br\")])]),a(\"p\",[n._v(\"当鼠标离开时用 ontouchend 方法监听：\")]),n._v(\" \"),a(\"div\",{staticClass:\"language- line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[n._v(\" canvas.ontouchhend = function(a){\\n\\n            using = false;\\n        }\\n\")])]),n._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[n._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[n._v(\"4\")]),a(\"br\")])])])}),[],!1,null,null,null);s.default=t.exports}}]);","extractedComments":[]}